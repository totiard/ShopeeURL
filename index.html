<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShopeeURL</title>
    <link rel="icon" type="image/png" href="Picture1.png">
    <link rel="stylesheet" href="https://unpkg.com/open-props/easings.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Montserrat&display=swap");

        * {box-sizing: border-box;}

        body {
            font-family: "Montserrat", sans-serif;
            background-color: whitesmoke;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            margin: 0;
            transition: background 0.3s linear;
        }

        body.dark {
            background-color: #292c35;
        }

        .container {
            background: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            width: 100%;
            max-width: 600px;
            text-align: center;
            margin: 20px auto;
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        body.dark .container {
            background-color: #333;
            color: #f1f1f1;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
        }

        body.dark h1 {
            color: #fff;
        }

        input[type="text"] {
            width: calc(100% - 22px);
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }

        body.dark input[type="text"] {
            background-color: #555;
            color: #f1f1f1;
            border-color: #666;
        }

        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 5px;
        }

        body.dark button {
            background-color: #0056b3;
        }

        button:hover {
            background-color: #0056b3;
        }

        body.dark button:hover {
            background-color: #004494;
        }

        .short-url-container {
            margin-top: 20px;
        }

        #shortUrl {
            background-color: #e9f5ff;
            border: 1px solid #b3d4fc;
            border-radius: 8px;
            padding: 15px;
            font-size: 16px;
            color: #333;
            word-break: break-word;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
            text-align: left;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }

        body.dark #shortUrl {
            background-color: #444;
            color: #f1f1f1;
            border: 1px solid #555;
        }

        #shortUrl a {
            color: #007bff;
            text-decoration: none;
            word-break: break-all;
        }

        body.dark #shortUrl a {
            color: #80b3ff;
        }

        #shortUrl a:hover {
            text-decoration: underline;
        }

        .copy-btn {
            background-color: #28a745;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 5px;
        }

        body.dark .copy-btn {
            background-color: #218838;
        }

        .copy-btn:hover {
            background-color: #218838;
        }

        body.dark .copy-btn:hover {
            background-color: #1e7e34;
        }

        .copy-btn:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }

        body.dark .copy-btn:disabled {
            background-color: #495057;
        }

        .footer {
            color: #777; /* Warna teks footer */
            text-align: center;
            padding: 10px;
            position: relative;
            margin-top: auto; /* Ini memastikan footer berada di bawah konten utama */
            transition: color 0.3s;
            background: none; /* Menghapus background */
        }

        body.dark .footer {
            color: #f1f1f1; /* Warna teks footer dalam mode gelap */
            text-shadow: 0 0 5px #00e676, 0 0 10px #00e676;
        }

        .about {
            max-width: 600px;
            text-align: left;
            margin: 30px auto;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        body.dark .about {
            background-color: #333;
            color: #f1f1f1;
            border-color: #444;
        }

        .about h2 {
            margin-top: 0;
        }

        .about img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
        }

        .about img.small {
            max-width: 300px; /* Atur ukuran maksimal sesuai kebutuhan */
            height: auto; /* Pertahankan proporsi gambar */
            margin-bottom: 10px; /* Jarak di bawah gambar */
        }

        .checkbox {
            opacity: 0;
            position: absolute;
        }

        .checkbox-label {
            background-color: #111;
            width: 50px;
            height: 26px;
            border-radius: 50px;
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 5px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .fa-moon {color: #f1c40f;}
        .fa-sun {color: #f39c12;}

        .checkbox-label .ball {
            background-color: #fff;
            width: 22px;
            height: 22px;
            position: absolute;
            left: 2px;
            top: 2px;
            border-radius: 50%;
            transition: transform 0.3s linear;
        }

        .checkbox:checked + .checkbox-label .ball {
            transform: translateX(24px);
        }

        .product-name {
            margin-top: 10px;
            font-size: 16px;
            color: #333;
        }

        body.dark .product-name {
            color: #fff;
        }
    </style>
</head>
<body>
    <input type="checkbox" class="checkbox" id="checkbox">
    <label for="checkbox" class="checkbox-label">
        <i class="fas fa-moon"></i>
        <i class="fas fa-sun"></i>
        <span class="ball"></span>
    </label>

    <div class="container">
        <h1 id="pageTitle">Memendekkan URL Shopee Web</h1>
        <input type="text" onfocus="this.value=''" id="urlInput" placeholder="Masukkan URL Shopee di sini">
        <button onclick="shortenUrl()">Generate URL</button>
        <div class="short-url-container">
            <div id="shortUrl"></div>
            <button class="copy-btn" id="copyBtn" onclick="copyUrl()" disabled>Salin URL</button>
            <button class="copy-btn" id="copyBtnWithName" onclick="copyUrlAndName()" disabled>Salin URL dan Nama Produk</button>
        </div>
    </div>

    <div class="about">
        <h2>ShopeeURL - Memendekkan URL Shopee Website atau Desktop</h2>
        <p><strong>Deskripsi:</strong></p>
        <p>Proyek ini dibuat untuk membantu pengguna yang ingin membagikan produk dari Shopee melalui versi website/desktop, di mana tidak terdapat tombol share seperti pada aplikasi mobile. Karena tidak ada opsi share di versi web/desktop, URL produk bisa menjadi sangat panjang dan sulit untuk dibagikan.</p>
        <p><b>Contoh:</b> <i>https://shopee.co.id/Apple-iPhone-13-128GB-Blue-i.255563049.8396212403?sp_atk=d90929d4-5d73-4eee-9037-3ff28ba26a98&xptdk=d90929d4-5d73-4eee-9037-3ff28ba26a98</i></p>
        <p>Aplikasi ini memungkinkan Anda untuk memendekkan URL produk Shopee menjadi link yang lebih pendek dan lebih mudah dibagikan. Selain itu, aplikasi ini juga menampilkan nama produk dengan format yang bersih dan mudah dibaca.</p>
        <p><strong>Fitur:</strong></p>
        <ul>
            <li>Memendekkan URL Shopee panjang menjadi URL pendek menggunakan API TinyURL.</li>
            <li>Menampilkan nama produk dengan format yang lebih mudah dibaca.</li>
            <li>Menyediakan tombol untuk menyalin URL pendek ke clipboard.</li>
            <li>Menyediakan tombol untuk menyalin URL pendek serta nama produk ke clipboard.</li>
            <li>Mendukung mode terang dan gelap untuk kenyamanan visual.</li>
        </ul>
        <!-- Gambar bukti tampilan mobile dan web -->
        <div>
            <img src="apk.png" alt="Tampilan Mobile" class="small">
            <img src="desktop.png" alt="Tampilan Web">
        </div>
    </div>

    <footer class="footer">
        <p>By Toti Ardiansyah</p>
    </footer>

    <script>
        const checkbox = document.getElementById("checkbox");
        checkbox.addEventListener("change", () => {
            document.body.classList.toggle("dark");
        });

        function shortenUrl() {
            const urlInput = document.getElementById('urlInput').value;
            if (!isValidShopeeUrl(urlInput)) {
                alert('Harap masukkan URL Shopee yang valid.');
                return;
            }

            const path = getPathFromShopeeUrl(urlInput);
            const productName = formatProductName(path);
            if (!path || !productName) {
                alert('Tidak dapat mengambil nama produk dari URL Shopee.');
                return;
            }

            // Menggunakan API TinyURL untuk memendekkan URL
            fetch(`https://tinyurl.com/api-create.php?url=${encodeURIComponent(urlInput)}`)
                .then(response => response.text())
                .then(shortUrl => {
                    const shortUrlElement = document.getElementById('shortUrl');
                    shortUrlElement.innerHTML = `
                        <a href="${shortUrl}" target="_blank">${shortUrl}</a><br><br>
                        Nama Produk: <strong>${productName}</strong>
                    `;
                    
                    // Enable the copy buttons
                    const copyBtn = document.getElementById('copyBtn');
                    const copyBtnWithName = document.getElementById('copyBtnWithName');
                    copyBtn.disabled = false;
                    copyBtnWithName.disabled = false;
                    copyBtn.setAttribute('data-url', shortUrl);
                    copyBtnWithName.setAttribute('data-url', shortUrl);
                    copyBtnWithName.setAttribute('data-product-name', productName);
                })
                .catch(error => {
                    console.error('Terjadi kesalahan:', error);
                    document.getElementById('shortUrl').innerText = 'Gagal memendekkan URL.';
                    document.getElementById('copyBtn').disabled = true;
                    document.getElementById('copyBtnWithName').disabled = true;
                });
        }

        function isValidShopeeUrl(url) {
            const shopeeDomainPattern = /^(https?:\/\/)?(www\.)?shopee\.co\.id\/.+/i;
            return shopeeDomainPattern.test(url);
        }

        function getPathFromShopeeUrl(url) {
            try {
                const urlObj = new URL(url);
                if (urlObj.hostname.includes('shopee.co.id')) {
                    return urlObj.pathname.split('/')[1] || ''; // Ambil bagian path pertama
                }
            } catch (e) {
                console.error('URL tidak valid:', e);
            }
            return null;
        }

        function formatProductName(path) {
            // Menghapus ID produk dan karakter khusus dari path
            if (!path) return '';

            const namePart = path.split('-').slice(0, -1).join(' '); // Ambil semua bagian kecuali ID
            return namePart.replace(/-/g, ' ').replace(/\b(\w)/g, char => char.toUpperCase()); // Ubah karakter pemisah menjadi spasi dan kapitalisasi kata
        }

        function copyUrl() {
            const copyBtn = document.getElementById('copyBtn');
            const shortUrl = copyBtn.getAttribute('data-url');

            if (shortUrl) {
                navigator.clipboard.writeText(shortUrl).then(() => {
                    alert('URL telah disalin ke clipboard!');
                }).catch(err => {
                    console.error('Gagal menyalin URL:', err);
                });
            }
        }

        function copyUrlAndName() {
            const copyBtnWithName = document.getElementById('copyBtnWithName');
            const shortUrl = copyBtnWithName.getAttribute('data-url');
            const productName = copyBtnWithName.getAttribute('data-product-name');

            if (shortUrl && productName) {
                const textToCopy = `URL: ${shortUrl}\nNama Produk: ${productName}`;
                navigator.clipboard.writeText(textToCopy).then(() => {
                    alert('URL dan nama produk telah disalin ke clipboard!');
                }).catch(err => {
                    console.error('Gagal menyalin URL dan nama produk:', err);
                });
            }
        }
    </script>
</body>
</html>
